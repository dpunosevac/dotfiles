############################
#  _
# | | By Theo
# | |_ _ __ ___  _   ___  __
# | __| '_ ` _ \| | | \ \/ /
# | |_| | | | | | |_| |>  <
#  \__|_| |_| |_|\__,_/_/\_\
#############################

# {{{ Basic settings
set -g default-terminal "xterm-256color" # Alternative: "tmux-256color"
set -g mouse on
set -g allow-rename off
set -g history-limit 10000
set -g base-index 1 # Oh no anti programmer behavior oh no
set -g escape-time 50 # Default 500 milsec, because back in the day escape sequence blah blah
set-window-option -g pane-base-index 1
# }}}

# {{{ Keybindings - bind -n binds without prefix
unbind r # Default <prefix>r
bind C-r source-file ~/.tmux.conf \; display-message "Reloading ~/.tmux.conf"

# Prefix
unbind-key C-b
set -g prefix C-a
# bind-key and bind are equivalent
bind-key C-a send-prefix # This sends <C-a><C-a> to the program

# Pane
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R
bind Left resize-pane -L 5
bind Down resize-pane -D 5
bind UP resize-pane -U 5
bind Right resize-pane -R 5
unbind '"'
bind | split-window -h -c "#{pane_current_path}"
unbind %
bind - split-window -v -c "#{pane_current_path}"

# New, kill, and renaming window/pane
unbind c
bind n new-window -c "#{pane_current_path}"
unbind & # Default binding for killing a window
unbind x # Default binding for killing a pane
bind C-k confirm-before -p "Kill pane #P? (y/n)" kill-pane
unbind ,
bind r command-prompt -I'#W' { rename-window -- '%%' }

# Redindex window (also look in to <prefix>!)
bind C-p swap-window -t :-1 \; previous-window
bind C-n swap-window -t :+1 \; next-window
unbind . # Default binding for moving (re-indexing) window
unbind m # Default binding for marking a window
bind m command-prompt -p "Move current window to:" "move-window -t :'%%' \; select-window -t :'%%'"
bind C-m command-prompt -p "Swap current window with:" "swap-window -t :'%%' \; select-window -t :'%%'"

# Moving panes between windows
bind C-s command-prompt -p "Send pane to:"  join-pane -t :'%%' # Have to have colon, otherwise it will send to a session
bind C-j command-prompt -p "Join pane from:"  join-pane -s :'%%'

# Maximizing a pane
unbind z # Default binding for maximizing (zooming) the pane
unbind f # Default binding for finding a pane
bind f resize-pane -Z
# }}}

# {{{ Copy mode
set-window-option -g mode-keys vi
# tmux list-keys | grep "send-keys -X cancel" shows that ESC is bound to canc in copy-mode but not in copy-mode-vi
unbind -T copy-mode-vi q; # Copy mode uses a separate command sets, so we have to use send-keys -X
bind -T copy-mode-vi Escape send-keys -X cancel

unbind -T copy-mode-vi Space;
bind -T copy-mode-vi v send-keys -X begin-selection
unbind -T copy-mode-vi Enter;
bind -T copy-mode-vi y send-keys -X copy-selection
# }}}

# {{{ Dracula color scheme
DRACULA_BG=#282a36
DRACULA_CURR_LINE=#44475a
DRACULA_FG=#f8f8f2
DRACULA_COMMENT=#6272a4
DRACULA_CYAN=#8be9fd
DRACULA_GREEN=#50fa7b
DRACULA_ORANGE=#ffb86c
DRACULA_PINK=#ff79c6
DRACULA_PURPLE=#bd93f9
DRACULA_RED=#ff5555
DRACULA_YELLOW=#f1fa8c

set -g pane-border-style fg=$DRACULA_COMMENT
set -g pane-active-border-style fg=$DRACULA_ORANGE
set -g message-style bg=$DRACULA_CURR_LINE,fg=$DRACULA_CYAN
# }}}

# {{{ Status bar settings
set -g status on
set -g status-position top
set -g status-keys vi
set -g status-interval 2 # Update status bar every 3 seconds
set -g status-style bg=$DRACULA_BG,fg=$DRACULA_FG

# Left side of the status bar
set -g status-left-style default
set -g status-left-length 45
set -g status-left "#[fg=$DRACULA_COMMENT]▊ "
set -ga status-left "#[fg=$DRACULA_PURPLE]❐ #S " # -a for appending, #S is session name
set -ga status-left "#[fg=$DRACULA_COMMENT]| "
set -ga status-left "#[fg=$DRACULA_PINK]  #h " # Host name (#H for host name with domain)
set -ga status-left "#[fg=$DRACULA_COMMENT]| "
set -ga status-left "#[fg=$DRACULA_CYAN]<\$ #{pane_current_command} "
set -ga status-left "#[fg=$DRACULA_COMMENT]▊"
#set -ga status-left "          "

# Right side of the status bar
set -g status-right-style default
set -g status-right-length 45
set -g status-right "#[fg=$DRACULA_COMMENT]▊ "
# uptime commands return HH:MM up x <unit>, x users, ... BUT HOUR DOESN'T DISPLAY MINUTE IN AM. Use cut -f 5-6 if it bothers you in the morning
set -ga status-right "#[fg=$DRACULA_RED]  uptime: #(uptime | cut -f 4-5 -d ' ' | cut -f 1 -d ',') "
set -ga status-right "#[fg=$DRACULA_COMMENT]| "
set -ga status-right "#[fg=$DRACULA_ORANGE]  %Y-%m-%d #[fg=$DRACULA_YELLOW]%H:%M "
set -ga status-right "#[fg=$DRACULA_COMMENT]▊"

# Center window list
set -g status-justify centre # position of window list component - British
set -g window-status-current-format "#[bg=$DRACULA_BG,fg=$DRACULA_ORANGE]"
set -ga window-status-current-format "#[bg=$DRACULA_ORANGE,fg=$DRACULA_CURR_LINE] #I #W"
set -ga window-status-current-format "#[bg=$DRACULA_BG,fg=$DRACULA_ORANGE]"
set -g window-status-format "#[bg=$DRACULA_BG,fg=$DRACULA_COMMENT]"
set -ga window-status-format "#[bg=$DRACULA_COMMENT,fg=$DRACULA_CURR_LINE]#I #W"
set -ga window-status-format "#[bg=$DRACULA_BG,fg=$DRACULA_COMMENT]"
# }}}

